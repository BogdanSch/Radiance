!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(e,t,r){"use strict";var n=function(e){var t=window.unsplash;if(void 0!==t)return t[e]},i=r(2),o=r.n(i),s=r(1);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=window.getUserSetting,p=function(e){var t=[],r=[];return e.filter((function(e){return y(e)})).forEach((function(e){t.push(l(e)),r.push(d(e))})),Promise.all(r),Promise.all(t)},l=function(e){var t=e.attributes,r=t.id,i=t.alt,o=t.title,u=t.description,c=t.caption,p=n("route")+"/import/".concat(r),l=n("route")+"/post-process/",d={alt:i,title:o,description:u,caption:c,parent:n("postId")};return wp.apiRequest({url:p,data:d,type:"POST"}).done((function(t){return e.set(a(a({},e.attributes),{id:t.id,url:t.source_url,nonces:t.nonces})),f({url:Object(s.addQueryArgs)(l+t.id,{retry:0}),retries:5,retryInterval:500,type:"POST"}),t})).fail((function(t){return jQuery.Deferred().reject(a(a({},t),{image:e}))}))},f=function e(t){t.counter||(t.counter=0);return wp.apiRequest(t).fail((function(){t.counter++<t.retries&&setTimeout((function(){return e(a(a({},t),{},{url:Object(s.addQueryArgs)(t.url,{retry:t.counter})}))}),t.retryInterval)}))},d=function(e){var t=wp.media.view.settings.defaultProps,r=c("imgsize",t.size)||"medium",n=e.attributes.sizes;return n&&n[r]&&n[r].url?g(n[r].url):null},h=function(e){return e&&["insert","featured-image","library","replace-image"].includes(e)},m=function(e){return(e=Array.isArray(e)?e:[e]).includes("image")},y=function(e){return e.attributes&&void 0!==e.attributes.unsplash_order&&"string"==typeof e.attributes.id},g=function(e){return new Promise((function(t,r){var n=new window.Image;n.onload=function(){return t(n)},n.onerror=r,n.decoding="async",n.src=e}))};r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return g}))},function(e,t){!function(){e.exports=this.wp.url}()},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";var n,i=r(1),o=r(0),s=wp.media.model.Query.extend({initialize:function(){wp.media.model.Query.prototype.initialize.apply(this,arguments),this._respSuccess=!0,this._respErrorMessage={}},sync:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("read"===e){var n=Object(o.a)("route"),s=_.clone(this.args);return-1!==s.posts_per_page&&(s.paged=Math.round(this.length/s.posts_per_page)+1),r.context=this,r.type="GET",r.url=s.s?Object(i.addQueryArgs)("".concat(n),{search:s.s}):n,r.data={page:s.paged,per_page:s.posts_per_page},wp.apiRequest(r)}var u=a.prototype.sync?a.prototype:Backbone;return u.sync.apply(this,arguments)},respSuccess:function(){return this._respSuccess},respErrorMessage:function(){return this._respErrorMessage},more:function(e){var t=this;return this._more&&"pending"===this._more.state()?this._more:this.hasMore()?((e=e||{}).remove=!1,this._more=this.fetch(e).done((function(e){if((_.isEmpty(e)||-1===this.args.posts_per_page||e.length<this.args.posts_per_page)&&(t._hasMore=!1),!1===e.success){t._hasMore=!1,t._respSuccess=e.success;var r=e.data.shift();this._respErrorMessage=r}else e.length&&e.forEach((function(e){var t=e.sizes;t&&t.medium&&t.medium.url&&Object(o.f)(t.medium.url)}))}))):jQuery.Deferred().resolveWith(this).promise()}},{defaultProps:{orderby:"unsplash_order",order:"ASC"},defaultArgs:{posts_per_page:30},get:(n=[],function(e,t){var r,i={},o=!!e.cache||void 0===e.cache;return delete e.query,delete e.cache,_.defaults(e,s.defaultProps),_.each(e,(function(e,t){_.isNull(e)||(i[s.propmap[t]||t]=e)})),_.defaults(i,s.defaultArgs),o?r=_.find(n,(function(e){return _.isEqual(e.args,i)})):n=[],r||(r=new s([],_.extend(t||{},{props:e,args:i})),n.push(r)),r})}),u=s,a=wp.media.model.Attachments.extend({_requery:function(e){if(this.props.get("query")){var t=this.props.toJSON();t.cache=!0!==e,this.mirror(u.get(t))}},mirror:function(e){return this.mirroring&&this.mirroring===e||(this.unmirror(),this.mirroring=e,this.reset([],{silent:!0}),this.observe(e),this.trigger("attachments:received",this)),this},more:function(e){var t=this,r=jQuery.Deferred(),n=this.mirroring,i=this;return n&&n.more?(n.more(e).done((function(){r.resolveWith(t),i.trigger("attachments:received",t)})),r.promise()):r.resolveWith(this).promise()},respSuccess:function(){return!this.mirroring||this.mirroring.respSuccess()},respErrorMessage:function(){return this.mirroring?this.mirroring.respErrorMessage():{}}}),c=wp.media.controller.State,p=c.extend({defaults:{id:"unsplash",toolbar:"unsplash",title:Object(o.a)("tabTitle"),content:"unsplash",menu:"unsplash",router:!1,priority:-60,filterable:"uploaded",multiple:"add",editable:!1},initialize:function(){var e,t=this.get("selection");this.get("library")||this.set("library",new a(null,{props:{orderby:"unsplash_order",order:"ASC",query:!0}})),t instanceof wp.media.model.Selection||((e=t)||(e=this.get("library").props.toJSON(),e=_.omit(e,"orderby","query")),this.set("selection",new wp.media.model.Selection(null,{multiple:this.get("multiple"),props:e}))),c.prototype.initialize.apply(this,arguments)}});t.a=p},,function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},,function(e,t){!function(){e.exports=this.wp.hooks}()},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(16);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(17),i=r(18);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},function(e,t){!function(){e.exports=this.wp.mediaUtils}()},,,function(e,t,r){e.exports=r(20)},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},,function(e,t,r){"use strict";r.r(t);var n=r(7),i=r(8),o=r.n(i),s=r(9),u=r.n(s),a=r(10),c=r.n(a),p=r(11),l=r.n(p),f=r(5),d=r.n(f),h=r(12),m=r(3);var y=function(e){c()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=d()(e);if(t()){var i=d()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}(r);function r(){return o()(this,r),t.apply(this,arguments)}return u()(r,[{key:"buildAndSetFeatureImageFrame",value:function(){var e,t=wp.media.view.MediaFrame.Select.extend({featuredImageToolbar:function(e){this.createSelectToolbar(e,{text:wp.media.view.l10n.setFeaturedImage,state:this.options.state})},editState:function(){var e=this.state("featured-image").get("selection"),t=new wp.media.view.EditImage({model:e.single(),controller:this}).render();this.content.set(t),t.loadEditor()},createStates:function(){this.on("toolbar:create:featured-image",this.featuredImageToolbar,this),this.on("content:render:edit-image",this.editState,this),this.states.add([new wp.media.controller.FeaturedImage,new wp.media.controller.EditImage({model:this.options.editImage}),new m.a])}}),r=(e=this.props.value,wp.media.query({order:"ASC",orderby:"post__in",post__in:e,posts_per_page:-1,query:!0,type:"image"})),n=new wp.media.model.Selection(r.models,{props:r.props.toJSON()});this.frame=new t({mimeType:this.props.allowedTypes,state:"featured-image",multiple:this.props.multiple,selection:n,editing:!!this.props.value}),wp.media.frame=this.frame}}]),r}(h.MediaUpload);Object(n.addFilter)("editor.MediaUpload","unsplash/extend-featured-image",(function(){return y}),10)}]);